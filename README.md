## City Data Portal Conversion

### This repo contains utilities for working with KML style formatted data available from the City of Sacramento Data Portal.

### What files do what:
1. xml2csv.py: html convert to CSV. Extracts tables, this file is a test file and not production.

2. kml2csv.py: kml convert to CSV. Does not do much yet, this file is a test file and not production.

3. jrcsv2gncsv.py  Converts from the klm like hierarchical csv format used by junar open data platform 
to a flat csv format. The script reads in a junar csv and emits a standard csv, paths given by fnamein and fnameout
Code tested with Sacramento Cites locations-of-city-trees.csv and PARKI-SPACE.csv. This utility requires the BeautifulSoup Python package to be installed.

4. scparkicsv2mysql.py  Builds and loads a mysql table from the CSV file generated by jrcsv2gncsv.py for parking data, field types are set appropriately for  parking space data set. Database credentials and path to parking .csv set in the header of code.   

5. sactreescsv2mysql.py Builds and loads a mysql table from the CSV file generated by jrcsv2gncsv.py for local tree data, field types are set appropriately for  tree  data set. Database credentials and path to parking .csv set in the header of code.   

### The Details
The City data portal makes geographic information available as CSV files, however these files are not flat standard CSV formats where one Item of data resides in each column. The file contains information in a KML style format. KML files are XML format where geographical information is given and then a list of key value pairs are provided that contain the specifics of the information found at the specific location. The City’s data is structured in a similar way but it is contained in a nonstandard CSV format containing geographical information is given at the beginning followed by a field called ‘description’ – which contains key value pairs, the description field is given in html format complete with a display header. We have provided a parser which decomposes the description field and renders a number of simple columns with the name of the keys in the key value pairs set. The columns content are the values that go with the keys. This work is provided by a Python utility which will generate different numbers of columns for data sets that contain different number of key value pairs with in it. Two specific utilities are provided to load the tree and parking data sets into a MySQL database. Separate utilities are required because the specific data sets have different number of columns with different field types which requires specific conversion and insertion coding. You don’t need to understand any of this to use the utilities. 

This software is distributable under the terms listed in the Code for America licensing agreement found here in LICENSE.md.
